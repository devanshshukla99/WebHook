{% extends "base.html" %}
{% block title %}WebHook{% endblock %}
{% block body %}
    <div class="container">
        <div class="hook-container">
            <form method="post" id="generate_hook">
                <input type="submit" class="btn btn-primary" value="Generate" name="generate"/><br/>
            </form>
            {% if data %}
                <div class="hook">
                    <h4>Hook: <a href="{{ data.get('hook') }}">{{ data.get('hook') }}</a></h4>
                </div><br>
                <div class="hook-token">
                    <h4>Token: <a href="{{ data.get('hook') }}/{{ data.get('token') }}">{{ data.get('hook') }}/{{ data.get('token') }}</a></h4>
                </div><br>
            {% endif %}
        </div>
        <div class="db-info-container">
            {% if db_rows %}
                <p>DB has {{ db_rows }} / {{ QUERIES }} hooks</p>
                {% if db_rows==QUERIES %}
                <p style="color: red">DB is full! the oldest hook would be deleted!</p>
                {% endif %}
            {% endif %}
            <form method="post" id="clear_db">
                <input type="password" class="bg-dark text-white" autocomplete="one-time-code" placeholder="Token" name="clear_token"/>
                <input type="submit" class="btn btn-primary" value="Clear database" name="clear_database"/>
            </form>
        </div>
        <div class="db-details">
            <form method="post" id="database_details">
                <input type="password" class="bg-dark text-white" autocomplete="one-time-code" placeholder="Token" name="admin_token"/>
                <input type="submit" class="btn btn-primary" value="Show database" name="show_database"/>
            </form>
        </div>
    </div>
{% endblock %}
